import{r as n,R as k,a as U}from"./app.8f41755a.js";import{C as g,S as O,y as v,T as j,o as y,c as H,u as E,p as C,$ as T,d as K}from"./open-closed.0d489d91.js";import{I as M,e as N,o as S,r as A}from"./use-owner.dcb13aec.js";import{s as F}from"./use-resolve-button-type.fe2d668c.js";var Q=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Q||{}),V=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(V||{});let X={[0]:e=>({...e,disclosureState:E(e.disclosureState,{[0]:1,[1]:0})}),[1]:e=>e.disclosureState===1?e:{...e,disclosureState:1},[4](e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},[5](e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},[2](e,r){return e.buttonId===r.buttonId?e:{...e,buttonId:r.buttonId}},[3](e,r){return e.panelId===r.panelId?e:{...e,panelId:r.panelId}}},R=n.exports.createContext(null);R.displayName="DisclosureContext";function h(e){let r=n.exports.useContext(R);if(r===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,h),t}return r}let $=n.exports.createContext(null);$.displayName="DisclosureAPIContext";function L(e){let r=n.exports.useContext($);if(r===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,L),t}return r}let w=n.exports.createContext(null);w.displayName="DisclosurePanelContext";function Y(){return n.exports.useContext(w)}function Z(e,r){return E(r.type,X,e,r)}let q=n.exports.Fragment,z=g(function(e,r){let{defaultOpen:t=!1,...a}=e,l=`headlessui-disclosure-button-${M()}`,s=`headlessui-disclosure-panel-${M()}`,u=n.exports.useRef(null),m=v(r,j(f=>{u.current=f},e.as===void 0||e.as===n.exports.Fragment)),x=n.exports.useRef(null),I=n.exports.useRef(null),c=n.exports.useReducer(Z,{disclosureState:t?0:1,linkedPanel:!1,buttonRef:I,panelRef:x,buttonId:l,panelId:s}),[{disclosureState:p},i]=c;n.exports.useEffect(()=>i({type:2,buttonId:l}),[l,i]),n.exports.useEffect(()=>i({type:3,panelId:s}),[s,i]);let P=y(f=>{i({type:1});let b=N(u);if(!b)return;let B=(()=>f?f instanceof HTMLElement?f:f.current instanceof HTMLElement?f.current:b.getElementById(l):b.getElementById(l))();B==null||B.focus()}),D=n.exports.useMemo(()=>({close:P}),[P]),o=n.exports.useMemo(()=>({open:p===0,close:P}),[p,P]),d={ref:m};return k.createElement(R.Provider,{value:c},k.createElement($.Provider,{value:D},k.createElement(H,{value:E(p,{[0]:C.Open,[1]:C.Closed})},T({ourProps:d,theirProps:a,slot:o,defaultTag:q,name:"Disclosure"}))))}),G="button",J=g(function(e,r){let[t,a]=h("Disclosure.Button"),l=Y(),s=l===null?!1:l===t.panelId,u=n.exports.useRef(null),m=v(u,r,s?null:t.buttonRef),x=y(o=>{var d;if(s){if(t.disclosureState===1)return;switch(o.key){case S.Space:case S.Enter:o.preventDefault(),o.stopPropagation(),a({type:0}),(d=t.buttonRef.current)==null||d.focus();break}}else switch(o.key){case S.Space:case S.Enter:o.preventDefault(),o.stopPropagation(),a({type:0});break}}),I=y(o=>{switch(o.key){case S.Space:o.preventDefault();break}}),c=y(o=>{var d;A(o.currentTarget)||e.disabled||(s?(a({type:0}),(d=t.buttonRef.current)==null||d.focus()):a({type:0}))}),p=n.exports.useMemo(()=>({open:t.disclosureState===0}),[t]),i=F(e,u),P=e,D=s?{ref:m,type:i,onKeyDown:x,onClick:c}:{ref:m,id:t.buttonId,type:i,"aria-expanded":e.disabled?void 0:t.disclosureState===0,"aria-controls":t.linkedPanel?t.panelId:void 0,onKeyDown:x,onKeyUp:I,onClick:c};return T({ourProps:D,theirProps:P,slot:p,defaultTag:G,name:"Disclosure.Button"})}),W="div",_=O.RenderStrategy|O.Static,ee=g(function(e,r){let[t,a]=h("Disclosure.Panel"),{close:l}=L("Disclosure.Panel"),s=v(r,t.panelRef,p=>{a({type:p?4:5})}),u=K(),m=(()=>u!==null?u===C.Open:t.disclosureState===0)(),x=n.exports.useMemo(()=>({open:t.disclosureState===0,close:l}),[t,l]),I=e,c={ref:s,id:t.panelId};return U(w.Provider,{value:t.panelId,children:T({ourProps:c,theirProps:I,slot:x,defaultTag:W,features:_,visible:m,name:"Disclosure.Panel"})})}),le=Object.assign(z,{Button:J,Panel:ee});export{le as O};
