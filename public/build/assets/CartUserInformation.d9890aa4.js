import{r as m,A as R,e as W,c as z,b as P,u as O,l as i,a as e,j as r,L as U,h as x,a6 as H,a7 as J,d as b}from"./app.8f41755a.js";import K from"./FrontendContainer.f87df6a5.js";import Q from"./FrontendContentContainer.e2e5b70a.js";import X from"./CartStepper.0e2a0f63.js";import w from"./ToolTipWidget.402995ed.js";import{calculateShipmentFees as Y}from"./helpers.b999fcd4.js";import"./index.74c4741c.js";import"./MainNav.20d61781.js";import"./index.esm.968e8465.js";import"./index.esm.c2914463.js";import"./SearchField.46d947e0.js";import"./pluralize.a87e66d1.js";import"./MainNavBookCategoriesList.378062f1.js";import"./popover.4efe15a7.js";import"./open-closed.0d489d91.js";import"./use-owner.dcb13aec.js";import"./use-resolve-button-type.fe2d668c.js";import"./use-event-listener.cd17cf37.js";import"./motion.5c4d7eb2.js";import"./CartIndexOrderSummary.222fd040.js";import"./lib.3666cbba.js";import"./NoElements.fe12762f.js";import"./tabs.59b69d47.js";import"./transition.a7dac45d.js";import"./dialog.d76c2d8b.js";import"./menu.b1c0e94d.js";import"./MetaElement.15b324ae.js";/* empty css                   */import"./SystemMessage.0606d8b1.js";import"./FrontendBreadCrumbs.bfadd15b.js";function Ie({countries:_,auth:o,settings:f}){const{trans:s,getLocalized:v,classNames:$,mainColor:k,mainBgColor:C,contentBgColor:j,textColor:y,btnClass:F}=m.exports.useContext(R),{locale:q,cart:g}=W(t=>t),[c,I]=m.exports.useState(""),[p,T]=m.exports.useState("");m.exports.useState("");const[D,G]=m.exports.useState(0),[h,M]=m.exports.useState([]),[S,L]=m.exports.useState([]),{props:A}=z(),{errors:l}=A,V=P(),{data:a,setData:u,put:Z,post:ee,progress:re,reset:ae}=O({name:o?o.name_ar:"",name_ar:o?o.name_ar:"",name_en:o?o.name_ar:"",email:o?o.email:"",mobile:o?o.mobile:"",phone:o?o.phone:"",block:o?o.block:"",street:o?o.street:"",building:o?o.building:"",floor:o?o.floor:"",apartment:o?o.apartment:"",country_name:o?o.country_name:"",area_name:o?o.area_name:"",country_id:o?o.country_id:"",governate_id:"",area_id:"",notes:s("no_notes"),receive_from_shop:0});m.exports.useMemo(()=>{const t=a.country_id?i.exports.first(i.exports.filter(_,N=>N.id==a.country_id)):i.exports.first(_);I(t),M(t.governates),u("governate_id",i.exports.first(t.governates).id);const d=i.exports.first(t.governates).areas;L(d),u("area_id",i.exports.first(d).id),u("receive_from_shop",0)},[a.country_id]),m.exports.useMemo(()=>{if(!i.exports.isEmpty(h)){const t=a.governate_id?i.exports.first(i.exports.filter(h,d=>d.id==a.governate_id)):i.exports.first(h);T(t),L(t.areas),u("area_id",i.exports.first(t.areas).id)}},[a.governate_id]),m.exports.useMemo(()=>{const t=i.exports.first(i.exports.filter(g.items,E=>E.type==="product")),d=t?t.merchant_enable_receive_from_shop:!1,N=Y(f.enable_products,c.is_local,a.receive_from_shop==1,f.enable_receive_from_shop,f.apply_global_shipment,parseFloat(c.fixed_shipment_charge),f.multi_cart_merchant,d,t?t.merchant_custome_delivery:!1,parseFloat(t?t.merchant_custome_delivery_fees:0),parseFloat(p.price),parseFloat(c.fixed_shipment_charge),g.totalItems);G(N)},[a.receive_from_shop,a.country_id,a.governate_id,a.area_id]);const n=t=>{u(d=>({...d,[t.target.id]:t.target.value}))},B=t=>{t.preventDefault(),V({type:H,payload:a.notes}),V(J({shipmentFees:D,receiveFromShop:c.is_local&&a.receive_from_shop&&i.exports.first(g.items).merchant_enable_receive_from_shop,shipmentCountry:c,shipmentGovernate:{id:p.id,country_id:p.country_id,price:p.price,name_ar:p.name_ar,name_en:p.name_en},area_id:a.area_id})),o&&o.id?b.Inertia.post(x("frontend.user.update",o.id),{_method:"put",...a,image:a.image},{forceFormData:!0,onSuccess:()=>b.Inertia.get(x("frontend.cart.confirmation",{_method:"get",...a}))}):b.Inertia.post(x("frontend.user.store"),{_method:"post",...a,image:a.image},{forceFormData:!0,onSuccess:()=>b.Inertia.get(x("frontend.cart.confirmation",{_method:"get",...a}))})};return e(K,{children:e(Q,{children:r("div",{className:`w-full mx-auto py-5 px-4 sm:px-6 lg:px-8 ${y} ${j}`,children:[e(X,{activeStep:2}),e("h1",{className:"text-3xl font-extrabold py-5 ",children:s("information")}),r("form",{className:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-16 gap-y-5 mt-5",onSubmit:B,children:[e("div",{className:"col-span-full",children:r("h2",{className:"text-lg font-medium ",children:[" ",s("information")]})}),r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"first-name",className:"block text-sm font-medium ",children:[s("name"),"*"]}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"name",name:"name",required:!0,maxLength:100,defaultValue:a.name_ar,autoComplete:"given-name",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("input",{type:"hidden",name:"name_ar",defaultValue:a.name_ar}),e("input",{type:"hidden",name:"name_en",defaultValue:a.name_en}),e("p",{className:"mt-2  ",children:l.name&&e("div",{className:"text-red-900",children:l.name})})]})]}),r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"email-address",className:"block text-sm font-medium ",children:[s("email"),"*"]}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"email",id:"email",name:"email",autoComplete:"email",maxLength:100,required:!0,defaultValue:a.email,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.email&&e("div",{className:"text-red-900",children:l.email})})]})]}),r("div",{className:"lg:col-span-1",children:[e("label",{htmlFor:"mobile",className:"block text-sm font-medium ",children:s("mobile")}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"number",id:"mobile",name:"mobile",max:99999999,defaultValue:a.mobile,autoComplete:"mobile",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.mobile&&e("div",{className:"text-red-900",children:l.mobile})})]})]}),e("div",{className:"col-span-full",children:r("h2",{className:"text-lg font-medium ",children:[" ",s("address")]})}),r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"country_id",className:"block   ",children:[s("country"),"*"]}),e("div",{className:"mt-1",children:r("select",{onChange:n,id:"country_id",name:"country_id",defaultValue:a.country_id,autoComplete:"country_id",required:!0,className:"shadow-sm focus:ring-gray-500 focus:border-gray-500 block w-full border-gray-300 rounded-md text-black",children:[r("option",{value:"",children:[s("choose")," ",s("country")]}),i.exports.map(_,t=>e("option",{value:t.id,children:t[v()]},t.id))]})}),e(w,{message:s("user_instruction")}),e("p",{className:"mt-2  ",children:l.country_id&&e("div",{className:"text-red-900",children:l.country_id})})]}),h&&r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"governate_id",className:"block   ",children:[s("governate"),"*"]}),e("div",{className:"mt-1",children:r("select",{required:!0,onChange:n,id:"governate_id",name:"governate_id",defaultValue:a.governate_id,autoComplete:"governate_id",className:"shadow-sm focus:ring-gray-500 focus:border-gray-500 block w-full border-gray-300 rounded-md text-black",children:[r("option",{value:"",children:[s("choose")," ",s("governate")]}),i.exports.map(h,t=>e("option",{value:t.id,children:t[v()]},t.id))]})}),e(w,{message:s("user_instruction")}),e("p",{className:"mt-2  ",children:l.governate_id&&e("div",{className:"text-red-900",children:l.governate_id})})]}),S&&r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"area_id",className:"block   ",children:[s("area"),"*"]}),e("div",{className:"mt-1",children:r("select",{onChange:n,required:!0,id:"area_id",name:"area_id",defaultValue:a.area_id,autoComplete:"area_id",className:"shadow-sm focus:ring-gray-500 focus:border-gray-500 block w-full border-gray-300 rounded-md text-black",children:[r("option",{value:"",children:[s("choose")," ",s("area")]}),i.exports.map(S,t=>e("option",{value:t.id,children:t[v()]},t.id))]})}),e(w,{message:s("user_instruction")}),e("p",{className:"mt-2  ",children:l.area_id&&e("div",{className:"text-red-900",children:l.area_id})})]}),r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"block",className:"block text-sm font-medium ",children:[s("block"),"*"]}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"block",name:"block",maxLength:10,required:!0,defaultValue:a.block,autoComplete:"given-block",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.block&&e("div",{className:"text-red-900",children:l.block})})]})]}),r("div",{className:"lg:col-span-1",children:[r("label",{htmlFor:"street",className:"street text-sm font-medium ",children:[s("street"),"*"]}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"street",name:"street",maxLength:50,required:!0,defaultValue:a.street,autoComplete:"given-street",className:" w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.street&&e("div",{className:"text-red-900",children:l.street})})]})]}),r("div",{className:"lg:col-span-1",children:[e("label",{htmlFor:"building",className:"building text-sm font-medium ",children:s("building")}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"building",maxLength:10,name:"building",defaultValue:a.building,autoComplete:"given-building",className:" w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.building&&e("div",{className:"text-red-900",children:l.building})})]})]}),r("div",{className:"lg:col-span-1",children:[e("label",{htmlFor:"apartment",className:"apartment text-sm font-medium ",children:s("apartment")}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"apartment",maxLength:10,name:"apartment",defaultValue:a.apartment,autoComplete:"given-apartment",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.apartment&&e("div",{className:"text-red-900",children:l.apartment})})]})]}),r("div",{className:"lg:col-span-1",children:[e("label",{htmlFor:"floor",className:"floor text-sm font-medium ",children:s("floor")}),r("div",{className:"mt-1",children:[e("input",{onChange:n,type:"text",id:"floor",name:"floor",maxLength:2,defaultValue:a.floor,autoComplete:"given-floor",className:" w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-200 focus:border-gray-200 sm:text-sm text-black"}),e("p",{className:"mt-2  ",children:l.floor&&e("div",{className:"text-red-900",children:l.floor})})]})]}),f.enable_receive_from_shop&&c.is_local&&g.items.length>0&&i.exports.first(g.items).merchant_enable_receive_from_shop?e("div",{className:"col-span-full",children:e("div",{className:"pt-6 sm:pt-5",children:e("div",{role:"group","aria-labelledby":"label-notifications",children:r("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-baseline",children:[e("div",{children:e("div",{className:"text-base font-medium text-gray-900 sm:text-sm sm:text-gray-700",id:"label-notifications",children:s("delivery_options")})}),e("div",{className:"sm:col-span-2",children:r("div",{className:"max-w-lg",children:[e("p",{className:"text-sm text-gray-500",children:s("delivery_options_instructions")}),r("div",{className:"mt-4 space-y-4",children:[r("div",{className:"flex items-center",children:[e("input",{id:"receive_from_shop",name:"receive_from_shop",onChange:n,value:0,defaultChecked:!a.receive_from_shop,type:"radio",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"}),e("label",{htmlFor:"delivery",className:"rtl:mr-3 ltr:ml-3 block text-sm font-medium text-gray-700",children:s("delivery")})]}),r("div",{className:"flex items-center",children:[e("input",{id:"receive_from_shop",name:"receive_from_shop",onChange:n,value:1,defaultChecked:a.receive_from_shop,type:"radio",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"}),e("label",{htmlFor:"receive_from_shop",className:"rtl:mr-3 ltr:ml-3 block text-sm font-medium text-gray-700",children:s("receive_from_shop")})]})]})]})})]})})})}):null,r("div",{className:"lg:col-span-full",children:[e("label",{htmlFor:"notes",className:`block ${y}`,children:s("notes")}),e("div",{className:"mt-1",children:e("textarea",{id:"notes",defaultValue:a.notes,name:"notes",rows:3,maxLength:150,className:"text-black shadow-sm focus:ring-gray-500 focus:border-gray-500 block w-full border border-gray-300 rounded-md",onChange:t=>u("notes",t.target.value)})}),e("p",{className:`mt-2 ${y}`,children:s("u_can_write_notes_related_to_order")})]}),r("div",{className:"mt-10 col-span-full flex flex-col sm:flex-row  space-y-5 sm:space-y-0 justify-between items-center w-full",children:[r(U,{href:x("frontend.cart.index"),className:`${F} flex flex-row justify-between items-center  border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-gray-500`,children:[e("div",{className:"flex",children:q.isRTL?e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}):e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e("span",{className:"flex",children:s("previous")})]}),r("div",{className:"flex flex-col sm:flex-row flex-wrap space-y-5 sm:space-y-0",children:[r("button",{type:"submit",className:`${F} capitalize mx-10 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-gray-500`,children:[s("save")," ",s("information")]}),o?null:e("button",{type:"button",disabled:!0,className:$(o?"bg-gray-600":"bg-gray-300",`text-${k}-50 dark:text-${C}-600 bg-${C}-800 dark:bg-${k}-400 hover:bg-gray-800 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-gray-500`),children:s("next")})]})]})]})]})})})}export{Ie as default};
