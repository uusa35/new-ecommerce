import{r as d,R as L}from"./app.8f41755a.js";import{s as S,C as T,S as O,y as D,o as v,c as j,u as U,p as C,$ as M,d as q,m as E}from"./open-closed.0d489d91.js";import{p as K}from"./transition.a7dac45d.js";import{e as B,L as V,I as N,n as W,F as G,N as H,o as f,r as J,D as z,T as Q,a as _,S as X}from"./use-owner.dcb13aec.js";import{s as Y}from"./use-resolve-button-type.fe2d668c.js";function Z({container:e,accept:u,walk:r,enabled:a=!0}){let t=d.exports.useRef(u),n=d.exports.useRef(r);d.exports.useEffect(()=>{t.current=u,n.current=r},[u,r]),S(()=>{if(!e||!a)return;let s=B(e);if(!s)return;let i=t.current,c=n.current,m=Object.assign(x=>i(x),{acceptNode:i}),p=s.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,m,!1);for(;p.nextNode();)c(p.currentNode)},[e,a,t,n])}function $(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function ee(e,u){let r=u.resolveItems();if(r.length<=0)return null;let a=u.resolveActiveIndex(),t=a!=null?a:-1,n=(()=>{switch(e.focus){case 0:return r.findIndex(s=>!u.resolveDisabled(s));case 1:{let s=r.slice().reverse().findIndex((i,c,m)=>t!==-1&&m.length-c-1>=t?!1:!u.resolveDisabled(i));return s===-1?s:r.length-1-s}case 2:return r.findIndex((s,i)=>i<=t?!1:!u.resolveDisabled(s));case 3:{let s=r.slice().reverse().findIndex(i=>!u.resolveDisabled(i));return s===-1?s:r.length-1-s}case 4:return r.findIndex(s=>u.resolveId(s)===e.id);case 5:return null;default:$(e)}})();return n===-1?a:n}var te=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(te||{}),re=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(re||{}),ne=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ne||{});function F(e,u=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,a=X(u(e.items.slice()),n=>n.dataRef.current.domRef.current),t=r?a.indexOf(r):null;return t===-1&&(t=null),{items:a,activeItemIndex:t}}let ae={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,u)=>{var r;let a=F(e),t=ee(u,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:t,activationTrigger:(r=u.trigger)!=null?r:1}},[3]:(e,u)=>{let r=e.searchQuery!==""?0:1,a=e.searchQuery+u.value.toLowerCase(),t=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(s=>{var i;return((i=s.dataRef.current.textValue)==null?void 0:i.startsWith(a))&&!s.dataRef.current.disabled}),n=t?e.items.indexOf(t):-1;return n===-1||n===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:n,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,u)=>{let r=F(e,a=>[...a,{id:u.id,dataRef:u.dataRef}]);return{...e,...r}},[6]:(e,u)=>{let r=F(e,a=>{let t=a.findIndex(n=>n.id===u.id);return t!==-1&&a.splice(t,1),a});return{...e,...r,activationTrigger:1}}},A=d.exports.createContext(null);A.displayName="MenuContext";function k(e){let u=d.exports.useContext(A);if(u===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,k),r}return u}function oe(e,u){return U(u.type,ae,e,u)}let ue=d.exports.Fragment,se=T(function(e,u){let r=d.exports.useReducer(oe,{menuState:1,buttonRef:d.exports.createRef(),itemsRef:d.exports.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:a,itemsRef:t,buttonRef:n},s]=r,i=D(u);V([n,t],(y,b)=>{var l;s({type:1}),G(b,H.Loose)||(y.preventDefault(),(l=n.current)==null||l.focus())},a===0);let c=v(()=>{s({type:1})}),m=d.exports.useMemo(()=>({open:a===0,close:c}),[a,c]),p=e,x={ref:i};return L.createElement(A.Provider,{value:r},L.createElement(j,{value:U(a,{[0]:C.Open,[1]:C.Closed})},M({ourProps:x,theirProps:p,slot:m,defaultTag:ue,name:"Menu"})))}),ie="button",le=T(function(e,u){var r;let[a,t]=k("Menu.Button"),n=D(a.buttonRef,u),s=`headlessui-menu-button-${N()}`,i=K(),c=v(l=>{switch(l.key){case f.Space:case f.Enter:case f.ArrowDown:l.preventDefault(),l.stopPropagation(),t({type:0}),i.nextFrame(()=>t({type:2,focus:I.First}));break;case f.ArrowUp:l.preventDefault(),l.stopPropagation(),t({type:0}),i.nextFrame(()=>t({type:2,focus:I.Last}));break}}),m=v(l=>{switch(l.key){case f.Space:l.preventDefault();break}}),p=v(l=>{if(J(l.currentTarget))return l.preventDefault();e.disabled||(a.menuState===0?(t({type:1}),i.nextFrame(()=>{var R;return(R=a.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(l.preventDefault(),t({type:0})))}),x=d.exports.useMemo(()=>({open:a.menuState===0}),[a]),y=e,b={ref:n,id:s,type:Y(e,a.buttonRef),"aria-haspopup":!0,"aria-controls":(r=a.itemsRef.current)==null?void 0:r.id,"aria-expanded":e.disabled?void 0:a.menuState===0,onKeyDown:c,onKeyUp:m,onClick:p};return M({ourProps:b,theirProps:y,slot:x,defaultTag:ie,name:"Menu.Button"})}),ce="div",de=O.RenderStrategy|O.Static,pe=T(function(e,u){var r,a;let[t,n]=k("Menu.Items"),s=D(t.itemsRef,u),i=W(t.itemsRef),c=`headlessui-menu-items-${N()}`,m=K(),p=q(),x=(()=>p!==null?p===C.Open:t.menuState===0)();d.exports.useEffect(()=>{let o=t.itemsRef.current;!o||t.menuState===0&&o!==(i==null?void 0:i.activeElement)&&o.focus({preventScroll:!0})},[t.menuState,t.itemsRef,i]),Z({container:t.itemsRef.current,enabled:t.menuState===0,accept(o){return o.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});let y=v(o=>{var g,h;switch(m.dispose(),o.key){case f.Space:if(t.searchQuery!=="")return o.preventDefault(),o.stopPropagation(),n({type:3,value:o.key});case f.Enter:if(o.preventDefault(),o.stopPropagation(),n({type:1}),t.activeItemIndex!==null){let{dataRef:P}=t.items[t.activeItemIndex];(h=(g=P.current)==null?void 0:g.domRef.current)==null||h.click()}_(t.buttonRef.current);break;case f.ArrowDown:return o.preventDefault(),o.stopPropagation(),n({type:2,focus:I.Next});case f.ArrowUp:return o.preventDefault(),o.stopPropagation(),n({type:2,focus:I.Previous});case f.Home:case f.PageUp:return o.preventDefault(),o.stopPropagation(),n({type:2,focus:I.First});case f.End:case f.PageDown:return o.preventDefault(),o.stopPropagation(),n({type:2,focus:I.Last});case f.Escape:o.preventDefault(),o.stopPropagation(),n({type:1}),E().nextFrame(()=>{var P;return(P=t.buttonRef.current)==null?void 0:P.focus({preventScroll:!0})});break;case f.Tab:o.preventDefault(),o.stopPropagation(),n({type:1}),E().nextFrame(()=>{z(t.buttonRef.current,o.shiftKey?Q.Previous:Q.Next)});break;default:o.key.length===1&&(n({type:3,value:o.key}),m.setTimeout(()=>n({type:4}),350));break}}),b=v(o=>{switch(o.key){case f.Space:o.preventDefault();break}}),l=d.exports.useMemo(()=>({open:t.menuState===0}),[t]),R=e,w={"aria-activedescendant":t.activeItemIndex===null||(r=t.items[t.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(a=t.buttonRef.current)==null?void 0:a.id,id:c,onKeyDown:y,onKeyUp:b,role:"menu",tabIndex:0,ref:s};return M({ourProps:w,theirProps:R,slot:l,defaultTag:ce,features:de,visible:x,name:"Menu.Items"})}),fe=d.exports.Fragment,me=T(function(e,u){let{disabled:r=!1,...a}=e,[t,n]=k("Menu.Item"),s=`headlessui-menu-item-${N()}`,i=t.activeItemIndex!==null?t.items[t.activeItemIndex].id===s:!1,c=d.exports.useRef(null),m=D(u,c);S(()=>{if(t.menuState!==0||!i||t.activationTrigger===0)return;let o=E();return o.requestAnimationFrame(()=>{var g,h;(h=(g=c.current)==null?void 0:g.scrollIntoView)==null||h.call(g,{block:"nearest"})}),o.dispose},[c,i,t.menuState,t.activationTrigger,t.activeItemIndex]);let p=d.exports.useRef({disabled:r,domRef:c});S(()=>{p.current.disabled=r},[p,r]),S(()=>{var o,g;p.current.textValue=(g=(o=c.current)==null?void 0:o.textContent)==null?void 0:g.toLowerCase()},[p,c]),S(()=>(n({type:5,id:s,dataRef:p}),()=>n({type:6,id:s})),[p,s]);let x=v(()=>{n({type:1})}),y=v(o=>{if(r)return o.preventDefault();n({type:1}),_(t.buttonRef.current)}),b=v(()=>{if(r)return n({type:2,focus:I.Nothing});n({type:2,focus:I.Specific,id:s})}),l=v(()=>{r||i||n({type:2,focus:I.Specific,id:s,trigger:0})}),R=v(()=>{r||!i||n({type:2,focus:I.Nothing})}),w=d.exports.useMemo(()=>({active:i,disabled:r,close:x}),[i,r,x]);return M({ourProps:{id:s,ref:m,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,disabled:void 0,onClick:y,onFocus:b,onPointerMove:l,onMouseMove:l,onPointerLeave:R,onMouseLeave:R},theirProps:a,slot:w,defaultTag:fe,name:"Menu.Item"})}),be=Object.assign(se,{Button:le,Items:pe,Item:me});export{Z as F,be as q};
